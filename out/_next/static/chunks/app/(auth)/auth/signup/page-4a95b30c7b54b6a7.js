(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{3168:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});let s=(0,t(5647).UU)("https://xwlmyhcidscevsenweyk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3bG15aGNpZHNjZXZzZW53ZXlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExNDMyNjUsImV4cCI6MjA2NjcxOTI2NX0.CSZNJl-cgLv3OpTEN8ADln-iWkBx-Ou2pGxJfycL_i4")},3390:(e,r,t)=>{Promise.resolve().then(t.bind(t,7507))},3580:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var s=t(2115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let r=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,r)},i=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(d);return s.useEffect(()=>(o.push(r),()=>{let e=o.indexOf(r);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var s=t(2596),a=t(9688);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},4861:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,AuthProvider:()=>o});var s=t(5155),a=t(2115),l=t(5695),n=t(3168);let i=(0,a.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),u=(0,l.useRouter)();(0,a.useEffect)(()=>{let{data:{subscription:e}}=n.N.auth.onAuthStateChange(async(e,r)=>{if(r){let{data:e}=await n.N.from("profiles").select("*").eq("id",r.user.id).single();e&&o({id:r.user.id,name:e.name,email:r.user.email,role:e.role,avatar:e.avatar_url})}else o(null);c(!1)});return()=>{e.unsubscribe()}},[]);let m=async(e,r)=>{c(!0);try{let{error:t}=await n.N.auth.signInWithPassword({email:e,password:r});if(t)throw t;u.push("/dashboard")}catch(e){throw console.error("Login error:",e),e}finally{c(!1)}},f=async(e,r,t,s)=>{c(!0);try{let{data:a,error:l}=await n.N.auth.signUp({email:r,password:t,options:{data:{name:e,role:s}}});if(l)throw l;if(!a.user)throw Error("No user data returned");let{error:i}=await n.N.from("profiles").insert([{id:a.user.id,name:e,role:s,email:r}]);if(i)throw await n.N.auth.admin.deleteUser(a.user.id),Error("Failed to create user profile. Please try again.");return{user:a.user,session:a.session}}catch(e){throw console.error("Signup error:",e),e}finally{c(!1)}},x=async()=>{try{let{error:e}=await n.N.auth.signOut();if(e)throw e;o(null),u.push("/")}catch(e){throw console.error("Logout error:",e),e}};return(0,s.jsx)(i.Provider,{value:{user:t,isLoading:d,login:m,signup:f,logout:x},children:r})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5784:(e,r,t)=>{"use strict";t.d(r,{bq:()=>m,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>u});var s=t(5155),a=t(2115),l=t(3081),n=t(6474),i=t(7863),o=t(5196),d=t(3999);let c=l.bL;l.YJ;let u=l.WT,m=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(l.l9,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let f=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let p=a.forwardRef((e,r)=>{let{className:t,children:a,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(x,{})]})})});p.displayName=l.UC.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.JU,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=l.JU.displayName;let h=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(l.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:a})]})});h.displayName=l.q7.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=l.wv.displayName},7168:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(5155),a=t(2115),l=t(9708),n=t(2635),i=t(3999);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:a,size:n,className:t})),ref:r,...c})});d.displayName="Button"},7507:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var s=t(5155),a=t(2115),l=t(6874),n=t.n(l),i=t(5695),o=t(2177),d=t(221),c=t(5594),u=t(7168),m=t(9540),f=t(9852),x=t(5784),p=t(8482),h=t(3580),j=t(4861),g=t(9929);let y=c.Ik({name:c.Yj().min(2,{message:"Name must be at least 2 characters"}),email:c.Yj().email({message:"Please enter a valid email address"}),password:c.Yj().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:c.Yj(),role:c.k5(["general","farmer","buyer","expert","teacher","weather","admin"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function w(){let{toast:e}=(0,h.dj)(),{signup:r}=(0,j.A)(),t=(0,i.useRouter)(),[l,c]=(0,a.useState)(!1),w=(0,o.mN)({resolver:(0,d.u)(y),defaultValues:{name:"",email:"",password:"",confirmPassword:"",role:"general"}}),v=async s=>{c(!0);try{await r(s.name,s.email,s.password,s.role),e({title:"Verification email sent!",description:"Please check your email for the verification code."}),t.push("/auth/verify?email=".concat(encodeURIComponent(s.email)))}catch(r){console.error("Signup error:",r),e({title:"Registration failed",description:r.message||"There was a problem creating your account.",variant:"destructive"})}finally{c(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/40 px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)(n(),{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)(g.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("span",{className:"font-bold text-2xl",children:"AgroByte"})]})}),(0,s.jsxs)(p.Zp,{children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(p.ZB,{className:"text-2xl text-center",children:"Create an account"}),(0,s.jsx)(p.BT,{className:"text-center",children:"Join the global agricultural community"})]}),(0,s.jsxs)(p.Wu,{children:[(0,s.jsx)(m.lV,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(v),className:"space-y-4",children:[(0,s.jsx)(m.zB,{control:w.control,name:"name",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Full Name"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(f.p,{placeholder:"John Doe",...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:w.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Email"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(f.p,{placeholder:"you@example.com",...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:w.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Password"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(f.p,{type:"password",placeholder:"••••••••",...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:w.control,name:"confirmPassword",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Confirm Password"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(f.p,{type:"password",placeholder:"••••••••",...r})}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(m.zB,{control:w.control,name:"role",render:e=>{let{field:r}=e;return(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"I am a"}),(0,s.jsxs)(x.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,s.jsx)(m.MJ,{children:(0,s.jsx)(x.bq,{children:(0,s.jsx)(x.yv,{placeholder:"Select your role"})})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"general",children:"General User"}),(0,s.jsx)(x.eb,{value:"farmer",children:"Farmer"}),(0,s.jsx)(x.eb,{value:"buyer",children:"Buyer"}),(0,s.jsx)(x.eb,{value:"expert",children:"Agricultural Expert"}),(0,s.jsx)(x.eb,{value:"teacher",children:"Teacher/Educator"}),(0,s.jsx)(x.eb,{value:"weather",children:"Weather Expert"})]})]}),(0,s.jsx)(m.C5,{})]})}}),(0,s.jsx)(u.$,{type:"submit",className:"w-full",disabled:l,children:l?"Creating account...":"Create account"})]})}),(0,s.jsxs)("div",{className:"relative my-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,s.jsx)("div",{className:"flex flex-col space-y-2",children:(0,s.jsxs)(u.$,{variant:"outline",className:"w-full",onClick:()=>e({title:"Google OAuth coming soon"}),children:[(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),(0,s.jsx)("path",{fill:"none",d:"M1 1h22v22H1z"})]}),"Google"]})})]}),(0,s.jsx)(p.wL,{className:"flex justify-center",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,s.jsx)(n(),{href:"/auth/login",className:"text-primary hover:underline",children:"Sign in"})]})})]})]})})}},8482:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>u});var s=t(5155),a=t(2115),l=t(3999);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},9540:(e,r,t)=>{"use strict";t.d(r,{lV:()=>u,MJ:()=>g,zB:()=>f,eI:()=>h,lR:()=>j,C5:()=>y});var s=t(5155),a=t(2115),l=t(9708),n=t(2177),i=t(3999),o=t(968);let d=(0,t(2635).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(o.b,{ref:r,className:(0,i.cn)(d(),t),...a})});c.displayName=o.b.displayName;let u=n.Op,m=a.createContext({}),f=e=>{let{...r}=e;return(0,s.jsx)(m.Provider,{value:{name:r.name},children:(0,s.jsx)(n.xI,{...r})})},x=()=>{let e=a.useContext(m),r=a.useContext(p),{getFieldState:t,formState:s}=(0,n.xW)(),l=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},p=a.createContext({}),h=a.forwardRef((e,r)=>{let{className:t,...l}=e,n=a.useId();return(0,s.jsx)(p.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...l})})});h.displayName="FormItem";let j=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:l,formItemId:n}=x();return(0,s.jsx)(c,{ref:r,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...a})});j.displayName="FormLabel";let g=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:n,formDescriptionId:i,formMessageId:o}=x();return(0,s.jsx)(l.DX,{ref:r,id:n,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...t})});g.displayName="FormControl",a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:l}=x();return(0,s.jsx)("p",{ref:r,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})}).displayName="FormDescription";let y=a.forwardRef((e,r)=>{let{className:t,children:a,...l}=e,{error:n,formMessageId:o}=x(),d=n?String(null==n?void 0:n.message):a;return d?(0,s.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",t),...l,children:d}):null});y.displayName="FormMessage"},9852:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var s=t(5155),a=t(2115),l=t(3999);let n=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"}},e=>{var r=r=>e(e.s=r);e.O(0,[406,825,430,490,521,884,441,684,358],()=>r(3390)),_N_E=e.O()}]);