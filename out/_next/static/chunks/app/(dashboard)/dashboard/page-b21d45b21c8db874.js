(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{3367:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var t=a(5155),i=a(2115),l=a(3959),r=a(5248),n=a(6766),o=a(7168),c=a(3999);let m=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});m.displayName="Textarea";var d=a(7305),h=a(8482),x=a(4861),p=a(4416),u=a(9946);let j=(0,u.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),g=(0,u.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),v=(0,u.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),f=(0,u.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var y=a(1497);let N=(0,u.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var b=a(7133),k=a(3580);let w=[{id:"1",author:{name:"John Farmer",role:"farmer",avatar:"https://randomuser.me/api/portraits/men/32.jpg"},content:"Just harvested my organic tomatoes! The yield is excellent this season. Has anyone else had good results with heirloom varieties?",image:"https://images.pexels.com/photos/533280/pexels-photo-533280.jpeg",timestamp:"2 hours ago",likes:24,comments:8},{id:"2",author:{name:"Dr. Sarah Ahmed",role:"expert",avatar:"https://randomuser.me/api/portraits/women/44.jpg"},content:"I've been observing an increase in leaf spot disease in rice crops across the southern region. Early detection is crucial. Here are some preventive measures farmers can take...",image:null,timestamp:"5 hours ago",likes:42,comments:15},{id:"3",author:{name:"Miguel Grower",role:"farmer",avatar:"https://randomuser.me/api/portraits/men/22.jpg"},content:"Does anyone have experience with drip irrigation systems for vegetable gardens? Looking for recommendations on brands and installation tips.",image:"https://images.pexels.com/photos/2286895/pexels-photo-2286895.jpeg",timestamp:"1 day ago",likes:18,comments:24}];function z(){var e;let{user:s}=(0,x.A)(),{toast:a}=(0,k.dj)(),[l,r]=(0,i.useState)(w),[c,u]=(0,i.useState)(""),[z,A]=(0,i.useState)(null),[C,S]=(0,i.useState)(!1),P=e=>{if(e.preventDefault(),!c.trim()&&!z)return void a({title:"Post cannot be empty",description:"Please add some text or an image to your post.",variant:"destructive"});S(!0),setTimeout(()=>{r([{id:Date.now().toString(),author:{name:(null==s?void 0:s.name)||"Anonymous",role:(null==s?void 0:s.role)||"general",avatar:(null==s?void 0:s.avatar)||""},content:c,image:z,timestamp:"Just now",likes:0,comments:0},...l]),u(""),A(null),S(!1),a({title:"Post published!",description:"Your post has been shared with the community."})},1e3)},M=e=>{r(l.map(s=>s.id===e?{...s,likes:s.likes+1}:s))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(h.Zp,{children:[(0,t.jsx)(h.aR,{className:"pb-2",children:(0,t.jsx)("h2",{className:"text-lg font-medium",children:"Create Post"})}),(0,t.jsx)(h.Wu,{children:(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(d.eu,{className:"h-10 w-10",children:[(0,t.jsx)(d.BK,{src:null==s?void 0:s.avatar,alt:null==s?void 0:s.name}),(0,t.jsx)(d.q5,{children:(null==s?void 0:s.name)?s.name.split(" ").map(e=>e[0]).join(""):"U"})]}),(0,t.jsx)(m,{placeholder:"What's on your mind, ".concat(null==s||null==(e=s.name)?void 0:e.split(" ")[0],"?"),className:"flex-1 resize-none",value:c,onChange:e=>u(e.target.value)})]}),z&&(0,t.jsxs)("div",{className:"mt-3 relative",children:[(0,t.jsx)("div",{className:"rounded-md overflow-hidden",children:(0,t.jsx)(n.default,{src:z,alt:"Selected image",width:200,height:150,className:"object-cover"})}),(0,t.jsx)(o.$,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 rounded-full bg-background/80",onClick:()=>A(null),children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(h.wL,{className:"flex justify-between pt-0",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>{let e=["https://images.pexels.com/photos/1153369/pexels-photo-1153369.jpeg","https://images.pexels.com/photos/707756/pexels-photo-707756.jpeg","https://images.pexels.com/photos/3004923/pexels-photo-3004923.jpeg"];A(e[Math.floor(Math.random()*e.length)])},children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2"}),"Photo"]}),(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>a({title:"Document upload coming soon"}),children:[(0,t.jsx)(g,{className:"h-4 w-4 mr-2"}),"Document"]})]}),(0,t.jsx)(o.$,{type:"submit",size:"sm",onClick:P,disabled:C,children:C?"Posting...":"Post"})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:l.map(e=>(0,t.jsxs)(h.Zp,{className:"overflow-hidden animate-in",children:[(0,t.jsx)(h.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(d.eu,{children:[(0,t.jsx)(d.BK,{src:e.author.avatar,alt:e.author.name}),(0,t.jsx)(d.q5,{children:e.author.name.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.author.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center",children:[(0,t.jsx)("span",{className:"capitalize",children:e.author.role}),(0,t.jsx)("span",{className:"mx-1",children:"â€¢"}),(0,t.jsx)("span",{children:e.timestamp})]})]})]}),(0,t.jsxs)(b.rI,{children:[(0,t.jsx)(b.ty,{asChild:!0,children:(0,t.jsx)(o.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(v,{className:"h-4 w-4"})})}),(0,t.jsxs)(b.SQ,{align:"end",children:[(0,t.jsx)(b._2,{children:"Save Post"}),(0,t.jsx)(b._2,{children:"Hide Post"}),(0,t.jsx)(b._2,{children:"Report"})]})]})]})}),(0,t.jsxs)(h.Wu,{className:"pb-3",children:[(0,t.jsx)("p",{className:"whitespace-pre-line",children:e.content}),e.image&&(0,t.jsx)("div",{className:"mt-3 rounded-md overflow-hidden",children:(0,t.jsx)(n.default,{src:e.image,alt:"Post image",width:800,height:400,className:"w-full object-cover"})})]}),(0,t.jsxs)(h.wL,{className:"border-t pt-3 flex justify-between",children:[(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1",onClick:()=>M(e.id),children:[(0,t.jsx)(f,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.likes})]}),(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1",onClick:()=>a({title:"Comments coming soon"}),children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.comments})]})]}),(0,t.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>a({title:"Sharing coming soon"}),children:[(0,t.jsx)(N,{className:"h-4 w-4 mr-2"}),"Share"]})]})]},e.id))})]})}function A(){let{user:e,isLoading:s}=(0,x.A)();return s?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-muted/30 dark:bg-background",children:[(0,t.jsx)(l.a,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(r.z,{}),(0,t.jsxs)("main",{className:"flex-1 px-4 py-6 max-w-6xl mx-auto",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold mb-6",children:["Welcome, ",e.name,"!"]}),(0,t.jsx)(z,{})]})]})]}):(window.location.href="/auth/login",null)}},9822:(e,s,a)=>{Promise.resolve().then(a.bind(a,3367))}},e=>{var s=s=>e(e.s=s);e.O(0,[406,825,430,490,69,665,441,684,358],()=>s(9822)),_N_E=e.O()}]);